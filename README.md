HMAC & JWT для 1С
=====

Реализация стандартов RFC 2104 https://www.ietf.org/rfc/rfc2104.txt и RFC 7519 https://tools.ietf.org/html/rfc7519 для платформы 1С.

Ограничения
-----------

Реализация работает начиная с платформы 1С:Предприятие версии 8.3.10.2168 и выше.
Платформу можно скачать здесь: https://online.1c.ru/catalog/programs/program/28765768/
Для JWT поддерживается только алгоритм HS256.
Функция ХАКС поддерживает алгоритмы: MD5, SHA1, SHA256

Примечание: Начиная с версии 8.3.21 можно использовать объект ТокенДоступа для создания JWT.
https://wonderland.v8.1c.ru/blog/autentifikatsiya-s-pomoshchyu-jwt-tokenov/

Установка
----------

Скачайте модули Криптография.bsl и JWT.bsl
Добавьте модули в конфигурацию 1С

Использование
-----

```bsl
	
	// ХАКС
	СекретныйКлюч = "Ключ";
	СтрокаДляПодписи = "Съешь ещё этих мягких французских булок, да выпей же чаю.";
	Подпись = Криптография.ХАКС(
		ПолучитьДвоичныеДанныеИзСтроки(СекретныйКлюч),
		ПолучитьДвоичныеДанныеИзСтроки(СтрокаДляПодписи),
		ХешФункция.SHA256);

	// JWT
	СекретныйКлюч = "Секрет";
	ПолезнаяНагрузка = Новый Структура;
	ПолезнаяНагрузка.Вставить("sub", "1234567890");
	ПолезнаяНагрузка.Вставить("name", "Василий Пупкин");
	ПолезнаяНагрузка.Вставить("admin", Истина);
	
	Токен = JWT.Зашифровать(СекретныйКлюч, ПолезнаяНагрузка);
	
	РасшифрованнаяПолезнаяНагрузка = JWT.Расшифровать(СекретныйКлюч, ПолезнаяНагрузка);
	
```

Авторские права и лицензия
-------------------

Автор: Василий Пинтов vasily@pintov.ru

Лицензия: MIT
